---

- name: Download ICU
  get_url:
    url: "{{ item.base_url }}/{{ item.archive_file }}"
    dest: "{{ icu_base }}"
    checksum: "{{ item.checksum }}"
  when: item.version == icu_version
  with_items: "{{ icu_versions }}"

- name: Unarchive ICU
  unarchive:
    src: "{{ icu_base }}/{{ item.archive_file }}"
    dest: "{{ icu_base }}"
    remote_src: yes
  when: item.version == icu_version
  with_items: "{{ icu_versions }}"

- name: Set ICU_HOME if configured.
  template:
    src: icu_home.sh.j2
    dest: /etc/profile.d/icu_home.sh
    mode: 0644
  when: icu_home
